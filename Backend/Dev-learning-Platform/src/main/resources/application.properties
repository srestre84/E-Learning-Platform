spring.application.name=Dev-learning-Platform

# ==============================================
# CONFIGURACIÓN DE SERVIDOR
# ==============================================
server.port=${PORT:8080}

# ==============================================
# CONFIGURACIÓN DE PERFILES
# ==============================================
# Activar perfil render en producción
spring.profiles.active=${SPRING_PROFILES_ACTIVE:render}

# ==============================================
# CONFIGURACIÓN DE BASE DE DATOS
# ==============================================
# Configuración por defecto para desarrollo
# Para producción, usar application-prod.properties

# Si hay DATABASE_URL, usar PostgreSQL, sino H2
spring.datasource.url=${DATABASE_URL:jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=MySQL;DATABASE_TO_LOWER=TRUE}
spring.datasource.username=${DATABASE_USERNAME:sa}
spring.datasource.password=${DATABASE_PASSWORD:password}
spring.datasource.driver-class-name=${DATABASE_DRIVER:org.h2.Driver}
spring.jpa.database-platform=${DATABASE_PLATFORM:org.hibernate.dialect.H2Dialect}

# Configuración específica para PostgreSQL cuando DATABASE_URL está presente
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:update}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# ==============================================
# CONFIGURACIÓN DE FLYWAY
# ==============================================
spring.flyway.enabled=false

# ==============================================
# CONFIGURACIÓN DE ALMACENAMIENTO
# ==============================================
app.upload.storage-type=local
app.upload.local.path=uploads
app.upload.local.base-url=${APP_BASE_URL:http://localhost:8080}/uploads

# ==============================================
# CONFIGURACIÓN DE JWT
# ==============================================
jwt.secret.key=${JWT_SECRET_KEY:4c6fb40397598dd8c1dbb3155fba3ca208a16fe8d5d90162b74f1874a4dc12b6}
jwt.expiration.time=${JWT_EXPIRATION_TIME:86400000}

# ==============================================
# CONFIGURACIÓN DE CARGA DE ARCHIVOS
# ==============================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB
spring.servlet.multipart.resolve-lazily=false

# ==============================================
# CONFIGURACIÓN DE STRIPE (OPCIONAL)
# ==============================================
stripe.api.key=${STRIPE_API_KEY:sk_test_dummy_key_for_development}
stripe.api.public.key=${STRIPE_API_PUBLIC_KEY:pk_test_dummy_key_for_development}
stripe.webhook.secret=${STRIPE_WEBHOOK_SECRET:whsec_dummy_secret_for_development}

# URLs de Stripe para redirección
stripe.success.url=${STRIPE_SUCCESS_URL:http://localhost:5173/payment/success?session_id={CHECKOUT_SESSION_ID}}
stripe.cancel.url=${STRIPE_CANCEL_URL:http://localhost:5173/payment/cancel}

# ==============================================
# CONFIGURACIÓN DE CORS
# ==============================================
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000,https://e-learning-platform-v2.netlify.app,https://68d06339dd81684b199dbda2--e-learning-platform-v2.netlify.app,https://68d06458dd81684dc29dbe15--e-learning-platform-v2.netlify.app,https://68d0836270eee69b08cba3cf--e-learning-platform-v2.netlify.app}
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# ==============================================
# CONFIGURACIÓN DE LOGGING
# ==============================================
logging.level.com.Dev_learning_Platform=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# ==============================================
# CONFIGURACIÓN DE ACTUATOR
# ==============================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.info.env.enabled=true